import { isArray } from '../util/isArray';
import { isPromise } from '../util/isPromise';
import { PromiseObservable } from './fromPromise';
import { IteratorObservable } from './IteratorObservable';
import { ArrayObservable } from './fromArray';
import { SymbolShim } from '../util/SymbolShim';
import { Observable } from '../Observable';
import { ObserveOnSubscriber } from '../operator/observeOn-support';
export class FromObservable extends Observable {
    constructor(ish, scheduler) {
        super(null);
        this.ish = ish;
        this.scheduler = scheduler;
    }
    static create(ish, scheduler = null) {
        if (ish != null) {
            if (typeof ish[SymbolShim.observable] === 'function') {
                if (ish instanceof Observable && !scheduler) {
                    return ish;
                }
                return new FromObservable(ish, scheduler);
            }
            if (isArray(ish)) {
                return new ArrayObservable(ish, scheduler);
            }
            else if (isPromise(ish)) {
                return new PromiseObservable(ish, scheduler);
            }
            else if (typeof ish[SymbolShim.iterator] === 'function' || typeof ish === 'string') {
                return new IteratorObservable(ish, null, null, scheduler);
            }
        }
        throw new TypeError((ish !== null && typeof ish || ish) + ' is not observable');
    }
    _subscribe(subscriber) {
        const ish = this.ish;
        const scheduler = this.scheduler;
        if (scheduler == null) {
            return ish[SymbolShim.observable]().subscribe(subscriber);
        }
        else {
            return ish[SymbolShim.observable]().subscribe(new ObserveOnSubscriber(subscriber, scheduler, 0));
        }
    }
}
//# sourceMappingURL=from.js.map